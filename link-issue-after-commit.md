# コミット後に手動で Issue を紐づける

GitHub では後から手動でコミットを Issue に紐づけることが可能です。

以下の方法で設定できます。

## 1. コミットメッセージを修正して紐づける

リポジトリの履歴を変更する方法です。

### 手順

#### 対象のコミットを確認

紐づけたいコミット ID を確認します。
git log コマンドで表示できます。

```sh
git log
```

#### コミットメッセージの修正

直近のコミットの場合：

```sh
git commit --amend
```

過去のコミットの場合：

インタラクティブリベースを使います。

修正したいコミットが履歴の 5 番目の場合：

```sh
git rebase -i HEAD~5
```

該当のコミットを「edit」に変更し、指示に従って編集します。

#### Issue 番号を追記

コミットメッセージに以下の形式で Issue 番号を追記します。

```text
Fixes #123
```

#123 は Issue 番号です。
Fixes を使うとその Issue が自動的にクローズされます。
クローズしない場合は Refs #123 を使用します。

#### 履歴を反映

修正後に以下を実行して変更をプッシュします。

```sh
git rebase --continue
git push --force
```

## 2. GitHub の UI から手動でリンク

Git の履歴を変更せずに、GitHub の UI から Issue に紐づける方法です。

### 手順

#### コミットのページを開く

対象のコミット ID をクリックして、コミットページにアクセスします。
Issue にコメントとしてリンク

紐づけたい Issue ページを開き、以下のようにコミット ID を記載したコメントを追加します：

```text
Related commit: <コミットの URL>
```

GitHub はコミット ID を自動的に認識してリンクを作成します。

#### Issue と関連付けを明示

必要に応じて、Issue のコメントや説明文にコミット URL を追加し、手動で関連付けを補足します。

## 3. コミットから Issue を手動で参照

コミットページのコメントセクションで、Issue 番号を明記する方法です。

### 手順

#### コミットページを開く

対象コミットのページを開きます。

#### コメントを追加

「コメント」欄に以下のように Issue 番号を記載します：

```text
References #123
```

GitHub が自動的に関連付けます。

## 注意事項

リポジトリが公開の場合、履歴の変更（例: git rebase）には注意してください。
他のコラボレーターに影響を与える可能性があります。
自動クローズが必要でない場合は、UI から手動でリンクを設定するのが安全です。
状況に応じて、適切な方法を選んでください！
